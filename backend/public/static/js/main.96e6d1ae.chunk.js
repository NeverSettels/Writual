(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{199:function(e,t,n){e.exports=n(369)},204:function(e,t,n){},369:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),o=n(3),r=n.n(o),c=(n(204),n(205),n(68)),i=n(47),s=n(79),u=n(11),m=n(371),g=n(372),f=n(55),p=n.n(f),d=n(370),y=n(374);function h(e){var t=e.post,n=e.context,o=Object(a.useState)(t.numBookmarks),r=Object(u.a)(o,2),c=r[0],i=r[1],s=Object(a.useState)(!1),m=Object(u.a)(s,2),g=m[0],f=m[1];function p(){g?(i(c-1),f(!g)):(i(c+1),f(!g))}return l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",margin:"10px",border:"1px solid #6a4944",padding:"10px"}},l.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},l.a.createElement(d.a,{src:t.postedBy.profilePic}),l.a.createElement("p",null,l.a.createElement("strong",null,t.postedBy.username))),l.a.createElement("div",null,l.a.createElement("h2",null,t.title),l.a.createElement("p",null,t.summary),t.categories.map(function(e){return l.a.createElement(y.a,null,e)})),l.a.createElement("div",null,l.a.createElement("p",null,c),n.state.isLogged?g?l.a.createElement("p",null,l.a.createElement("strong",null,"Bookmarked!"),l.a.createElement("button",{onClick:p},"Bookmark")):l.a.createElement("button",{onClick:p},"Bookmark"):"",l.a.createElement("p",null,"read")))}var b=[{label:"Red",style:"red"},{label:"Orange",style:"orange"},{label:"Yellow",style:"yellow"},{label:"Green",style:"green"},{label:"Blue",style:"blue"},{label:"Indigo",style:"indigo"},{label:"Violet",style:"violet"}],v=[{label:" \u201c \u201d ",style:"blockquote"},{label:"UL",style:"unordered-list-item"},{label:"OL",style:"ordered-list-item"},{label:"{ }",style:"code-block"}],E=[{label:"No Header",style:"unstyled"},{label:"H1",style:"header-one"},{label:"H2",style:"header-two"},{label:"H3",style:"header-three"},{label:"H4",style:"header-four"},{label:"H5",style:"header-five"},{label:"H6",style:"header-six"}],C=[{label:"Left",style:"alingLeft"},{label:"Center",style:"alingCenter"},{label:"Right",style:"alingRight"}],O=["Short Story","Poetry","Haiku","Fanfic","Sonnet","Limerick","Prose","Script","Essay","Speech","Fantasy","Sci-Fi","Western","Romance","Thriller","Mystery","Detective","Dystopia","Horror","Contemporary","Historical","Fiction","Nonfiction","Adventure","Humor","Motivational","Apocalyptic","Post-Apocalyptic","Swashbuckler","Adult","LGBT+","Scientific","Religious","True Crime","POV","Antihero","Tragedy","Comedy "],S=n(30),k=n(98),j=n(99),w="https://writual.herokuapp.com",x=function(){function e(){Object(k.a)(this,e),this.service=p.a.create({baseURL:w,withCredentials:!0})}return Object(j.a)(e,[{key:"signup",value:function(e){return this.service.post("/signup",e)}},{key:"login",value:function(e){return this.service.post("/login",e)}},{key:"logout",value:function(){return this.service.get("/logout")}},{key:"profile",value:function(){return this.service.get("/profile")}}]),e}(),T=Object(a.createContext)();var L=function(e){Object(a.useEffect)(function(){(new x).profile().then(function(e){return r({isLogged:!0})}).catch()},[]);var t=Object(a.useState)({user:{},isLogged:!1}),n=Object(u.a)(t,2),o=n[0],r=n[1];return l.a.createElement(T.Provider,{value:{state:o,setUser:function(e){r(function(t){return Object(S.a)({},t,{user:e,isLogged:!t.isLogged})})}}},e.children)},R=m.a.Content,B=m.a.Sider;function I(){var e=Object(a.useContext)(T),t=Object(a.useState)([]),n=Object(u.a)(t,2),o=n[0],r=n[1];return Object(a.useEffect)(function(){p.a.get("https://writual.herokuapp.com/posts").then(function(e){var t=e.data;r(function(e){return[].concat(Object(s.a)(e),Object(s.a)(t.posts))})}).catch(function(e){return console.log(e)})},[]),l.a.createElement(m.a,null,l.a.createElement(B,{style:{backgroundColor:"#d1582b",margin:"10vh 0px 0",overflow:"auto",height:"100vh",position:"fixed",left:0}},l.a.createElement("div",{className:"logo"}),l.a.createElement(g.a,{style:{backgroundColor:"#d1582b",color:"#D4dfc2",padding:"15px"},mode:"inline",defaultSelectedKeys:["4"]},l.a.createElement("h2",{style:{color:"#D4dfc2"}},"Catgories"),O.map(function(e){return l.a.createElement(g.a.Item,{key:e},l.a.createElement("span",{className:"nav-text"},e))}))),l.a.createElement(m.a,{style:{marginLeft:200}},l.a.createElement(R,{style:{height:"90vh",margin:"10vh 16px 0",overflow:"initial"}},o.map(function(t){return l.a.createElement(h,{key:t._id,post:t,context:e})}))))}function U(e){var t=Object(a.useContext)(T),n=new x;return l.a.createElement("span",{onClick:function(e){n.logout().then(function(e){t.setUser({})}).catch(function(e){console.log(e)})}},"Logout")}var H=n(76),P=function(){var e=Object(a.useState)({}),t=Object(u.a)(e,2),n=t[0],l=t[1];return[n,function(e){e.persist(),l(function(t){return Object(S.a)({},t,Object(H.a)({},e.target.name,e.target.value))})},function(e,t){console.log(t),l(function(n){return Object(S.a)({},n,Object(H.a)({},e,t))})}]},D=n(373);function N(){var e=P(),t=Object(u.a)(e,2),n=t[0],o=t[1],r=new x,c=Object(a.useState)(!1),i=Object(u.a)(c,2),s=i[0],m=i[1],g=Object(a.useState)(!1),f=Object(u.a)(g,2),p=f[0],d=f[1],y=Object(a.useContext)(T);return l.a.createElement("div",null,l.a.createElement("span",{type:"primary",onClick:function(){m(!0)}},"Login"),l.a.createElement(D.a,{title:"Login",visible:s,onOk:function(){d(!0),r.login(n).then(function(e){console.log(e),y.setUser(e.user)}).catch(function(e){console.log(e)}),setTimeout(function(){m(!1),d(!1)},2e3)},confirmLoading:p,onCancel:function(){console.log("Clicked cancel button"),m(!1)}},l.a.createElement("input",{type:"email",name:"email",onChange:function(e){return o(e)}}),l.a.createElement("input",{type:"password",name:"password",onChange:function(e){return o(e)}})))}function A(){var e=P(),t=Object(u.a)(e,2),n=t[0],o=t[1],r=new x,c=Object(a.useState)(!1),i=Object(u.a)(c,2),s=i[0],m=i[1],g=Object(a.useState)(!1),f=Object(u.a)(g,2),p=f[0],d=f[1];return l.a.createElement("div",null,l.a.createElement("span",{onClick:function(){m(!0)}},"Sing Up"),l.a.createElement(D.a,{title:"Sign Up",visible:s,onOk:function(){d({confirmLoading:!0}),r.signup(n).then(function(e){console.log(e)}).catch(function(e){console.log(e)}),setTimeout(function(){m(!1),d(!1)},2e3)},confirmLoading:p,onCancel:function(){console.log("Clicked cancel button"),m(!1)}},l.a.createElement("input",{type:"text",name:"username",placeholder:"Pick a pen name",onChange:function(e){return o(e)}}),l.a.createElement("input",{type:"email",name:"email",placeholder:"Your Email",onChange:function(e){return o(e)}}),l.a.createElement("input",{type:"password",placeholder:"Pick a Password",name:"password",onChange:function(e){return o(e)}})))}function F(e){var t=Object(a.useContext)(T);return l.a.createElement("nav",{className:"nav-bar"},l.a.createElement(c.b,{activeClassName:"active",to:"/"},l.a.createElement("img",{style:{height:"10vh"},src:"/logo.PNG",alt:""})),t.state.isLogged?l.a.createElement(l.a.Fragment,null,l.a.createElement(c.c,{activeClassName:"active",to:"/profile"},l.a.createElement("span",null,"Profile")),l.a.createElement(c.c,{activeClassName:"active",to:"/create"},l.a.createElement("span",null,"Create")),l.a.createElement(U,null)):l.a.createElement(l.a.Fragment,null,l.a.createElement(N,null),l.a.createElement(A,null)))}var M=n(16);var K=function(e){var t="RichEditor-styleButton";return e.active&&(t+=" RichEditor-activeButton"),l.a.createElement("button",{className:t,onClick:function(t){t.preventDefault(),e.onToggle(e.style)}},e.label)};var G=function(e){return l.a.createElement("select",{value:e.active,onChange:function(t){var n=t.target.value;e.onToggle(n)}},l.a.createElement("option",{value:""},"Header Levels"),e.headerOptions.map(function(e,t){return l.a.createElement("option",{key:t,value:e.style},e.label)}))};function q(e){switch(e.getType()){case"blockquote":return"myBlockquote";default:return null}}var z=function(e){var t=e.editorState,n=e.onToggle,a=t.getSelection(),o=t.getCurrentContent().getBlockForKey(a.getStartKey()).getType();return l.a.createElement("span",{className:"RichEditor-controls"},l.a.createElement(G,{headerOptions:E,active:o,onToggle:n}),v.map(function(e){return l.a.createElement(K,{active:e.style===o,label:e.label,onToggle:n,style:e.style,key:e.label,type:e})}))},J={red:{color:"rgba(255, 0, 0, 1.0)"},orange:{color:"rgba(255, 127, 0, 1.0)"},yellow:{color:"rgba(180, 180, 0, 1.0)"},green:{color:"rgba(0, 180, 0, 1.0)"},blue:{color:"rgba(0, 0, 255, 1.0)"},indigo:{color:"rgba(75, 0, 130, 1.0)"},violet:{color:"rgba(127, 0, 255, 1.0)"}},W={alingLeft:{textAlign:"left"},alingCenter:{textAlign:"center"},alingRight:{textAlign:"right"}},Y={root:{fontFamily:"'Georgia', serif",fontSize:14,padding:20,width:600},editor:{borderTop:"1px solid #ddd",cursor:"text",fontSize:16,marginTop:20,minHeight:400,paddingTop:20},controls:{fontFamily:"'Helvetica', sans-serif",fontSize:14,marginBottom:10,userSelect:"none"},styleButton:{color:"#999",cursor:"pointer",marginRight:16,padding:"2px 0"}};var V=function(e){var t;return t=e.active?Object(S.a)({},Y.styleButton,J[e.style]):Y.styleButton,l.a.createElement("span",{style:t,onMouseDown:function(t){t.preventDefault(),e.onToggle(e.style)}},e.label)},_=function(e){var t=e.editorState.getCurrentInlineStyle();return l.a.createElement("div",{style:Y.controls},b.map(function(n){return l.a.createElement(V,{key:n.label,active:t.has(n.style),label:n.label,onToggle:e.onToggle,style:n.style})}))};var $=function(e){var t;return t=e.active?Object(S.a)({},Y.styleButton,W[e.style],{color:"black"}):Y.styleButton,l.a.createElement("div",{style:t,onMouseDown:function(t){t.preventDefault(),e.onToggle(e.style)}},e.label)},Q=function(e){var t=e.editorState.getCurrentInlineStyle();return l.a.createElement("div",{style:Y.controls},C.map(function(n){return l.a.createElement($,{key:n.label,active:t.has(n.style),label:n.label,onToggle:e.onToggle,style:n.style})}))},X=n(375),Z=n(80),ee=y.a.CheckableTag;function te(e){var t=e.categories,n=e.setCategories;return l.a.createElement("div",null,l.a.createElement("h6",{style:{marginRight:8,display:"inline"}},"Categories:"),O.map(function(e){return l.a.createElement(ee,{key:e,checked:t.indexOf(e)>-1,onChange:function(a){return function(e,a){var l=a?[].concat(Object(s.a)(t),[e]):t.filter(function(t){return t!==e});console.log("You are interested in: ",l),n(l)}(e,a)}},e)}))}var ne="https://writual.herokuapp.com",ae=function(){function e(){Object(k.a)(this,e),this.service=p.a.create({baseURL:ne,withCredentials:!0})}return Object(j.a)(e,[{key:"newPost",value:function(e,t){return this.service.post("/".concat(t),e)}}]),e}();function le(e){var t=P(),n=Object(u.a)(t,2),o=n[0],r=n[1],c=Object(a.useState)([]),i=Object(u.a)(c,2),s=i[0],m=i[1],g=Object(a.useState)(!1),f=Object(u.a)(g,2),p=f[0],d=f[1],y=Object(a.useState)(!1),h=Object(u.a)(y,2),b=h[0],v=h[1],E=e.contentState,C=e.save,O=e.setContentState,k=e.user,j=e.Histprops,w=e.saveto,x=new ae;return l.a.createElement("div",null,l.a.createElement(Z.a,{type:"primary",onClick:function(){O(C()),d(!0)}},"posts"===w?l.a.createElement("span",null,"Publish"):l.a.createElement("span",null,"Save Draft")),l.a.createElement(D.a,{title:"Finish Up!",visible:p,onOk:function(){x.newPost(Object(S.a)({},o,{categories:s,content:E,postedBy:k._id}),w).then(function(e){return"draft"===w?l.a.createElement(X.a,{message:"Saved to Drafts",type:"success"}):l.a.createElement(X.a,{message:"Posted",type:"success"})}).catch(function(e){return console.log(e)}),v(!0),setTimeout(function(){d(!1),v(!1),j.props.history.push("/profile")},3e3)},confirmLoading:b,onCancel:function(){d(!1)}},l.a.createElement("input",{type:"text",name:"title",placeholder:"Add a title",onChange:function(e){return r(e)}}),l.a.createElement("input",{type:"text",name:"summary",placeholder:"Add a short Summary",maxLength:"140",onChange:function(e){return r(e)}}),l.a.createElement("h3",null,"Choose Categories"),l.a.createElement(te,{categories:s,setCategories:m})))}function oe(e){var t=Object(a.useState)(M.EditorState.createEmpty()),n=Object(u.a)(t,2),o=n[0],r=n[1],c=Object(a.useState)(""),i=Object(u.a)(c,2),s=i[0],m=i[1],g=Object(a.useState)({}),f=Object(u.a)(g,2),p=f[0],d=f[1];Object(a.useEffect)(function(){(new x).profile().then(function(e){var t=e.data.user;d(t)}).catch(function(t){return e.props.history.push("/")})},[e.props.history]);var y=l.a.useRef(null),h=function(e){r(e)};function b(){var e=Object(M.convertToRaw)(o.getCurrentContent());return"".concat(JSON.stringify(e))}return l.a.createElement("div",null,l.a.createElement("div",{style:Y.root},l.a.createElement(z,{editorState:o,onToggle:function(e){h(M.RichUtils.toggleBlockType(o,e))}}),l.a.createElement("button",{onClick:function(){h(M.RichUtils.toggleInlineStyle(o,"BOLD"))}},"B"),l.a.createElement("button",{onClick:function(){h(M.RichUtils.toggleInlineStyle(o,"ITALIC"))}},"I"),l.a.createElement("button",{onClick:function(){h(M.RichUtils.toggleInlineStyle(o,"UNDERLINE"))}},"U"),l.a.createElement(_,{editorState:o,onToggle:function(e){return function(e){var t=o.getSelection(),n=Object.keys(J).reduce(function(e,n){return M.Modifier.removeInlineStyle(e,t,n)},o.getCurrentContent()),a=M.EditorState.push(o,n,"change-inline-style"),l=o.getCurrentInlineStyle();t.isCollapsed()&&(a=l.reduce(function(e,t){return M.RichUtils.toggleInlineStyle(e,t)},a)),l.has(e)||(a=M.RichUtils.toggleInlineStyle(a,e)),h(a)}(e)}}),l.a.createElement(Q,{editorState:o,onToggle:function(e){return function(e){var t=o.getSelection(),n=Object.keys(W).reduce(function(e,n){return M.Modifier.removeInlineStyle(e,t,n)},o.getCurrentContent()),a=M.EditorState.push(o,n,"change-inline-style"),l=o.getCurrentInlineStyle();t.isCollapsed()&&(a=l.reduce(function(e,t){return M.RichUtils.toggleInlineStyle(e,t)},a)),l.has(e)||(a=M.RichUtils.toggleInlineStyle(a,e)),h(a)}(e)}})),l.a.createElement("div",{style:{height:"100vh",margin:"20vh",border:"1px solid gray",overflow:"scroll"}},l.a.createElement(M.Editor,{customStyleMap:J,ref:y,blockStyleFn:q,editorState:o,onChange:h,handleKeyCommand:function(e,t){var n=M.RichUtils.handleKeyCommand(t,e);return n?(h(n),"handled"):"not-handled"}})),l.a.createElement(le,{contentState:s,setContentState:m,save:b,user:p,Histprops:e,saveto:"posts"}),l.a.createElement(le,{contentState:s,setContentState:m,save:b,user:p,Histprops:e,saveto:"drafts"}),l.a.createElement(Z.a,{type:"danger"},"Cancel"))}function re(e){return l.a.createElement("div",{style:{padding:"10vh 0 0 0"}},l.a.createElement(oe,{props:e}))}var ce=function(){return l.a.createElement(c.a,null,l.a.createElement(F,null),l.a.createElement(i.c,null,l.a.createElement(i.a,{exact:!0,path:"/",component:I}),l.a.createElement(i.a,{exact:!0,path:"/create",component:re}),l.a.createElement(i.a,{exact:!0,path:"/profile",component:I})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(L,null,l.a.createElement(ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[199,1,2]]]);
//# sourceMappingURL=main.96e6d1ae.chunk.js.map